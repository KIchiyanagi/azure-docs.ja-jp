---
title: "Azure Machine Learning の Data Preparation の概要 | Microsoft Docs"
description: "これは、AML Workbench の Data Preparation セクションのファースト ステップ ガイドです。"
author: cforbe
ms.author: cforbe
ms.service: machine-learning
ms.workload: data-services
ms.topic: article
ms.date: 09/07/2017
ms.openlocfilehash: faf6e557914a33454229b5830419b9ef6f200a8c
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/11/2017
---
# <a name="getting-started-with-data-preparation"></a>Data Preparation の概要

Data Preparation のファースト ステップ ガイドへようこそ。 

Data Preparation は、データの問題を効率的に調査、理解、および修正するための一連のツールを提供します。 さまざまな形式でデータを利用し、そのデータを、よりダウンストリームでの使用に適したクレンジング済みデータに変換することができます。

Data Preparation は、Azure Machine Learning Workbench エクスペリエンスの一部としてインストールされます。  Data Preparation をローカルで使用するか、ランタイムまたは実行環境としてターゲットのクラスターやクラウドにデプロイします。

設計時ランタイムは拡張性のために Python を使用し、Pandas などのさまざまな Python ライブラリに依存します。 Azure ML Workbench の他のコンポーネントと同様、Python は自動的にインストールされ、手動でインストールする必要はありません。 ただし、追加のライブラリをインストールする必要がある場合、これらのライブラリは通常の Python ディレクトリではなく Azure ML Workbench Python ディレクトリにインストールする必要があります。 パッケージのインストール方法の詳細については、[こちら](data-prep-python-extensibility-overview.md)を参照してください。

Data Prep を使用する前にプロジェクトが必要であり、プロジェクトが作成されたらデータの準備ができます。 

画面左側の [Data] (データ) アイコン ![データ ソース アイコン](media/data-prep-getting-started/data-source-icon.png) を選択して、プロジェクトの [Data] (データ) セクションに移動します。  [+] をもう一度クリックし、**[Add a Data Source] (データ ソースの追加)** に進みます。 [Data Source Wizard] (データ ソース ウィザード) が起動し、ウィザードの完了後、**データ ソース** (.dsource) ファイルをプロジェクトに追加します。 既定では、データのビューはグリッドです。 グリッドの上で、[Metrics] (メトリック) ビューを選択することもできます。 [Metrics] (メトリック) ビューでは、要約統計が表示されます。  要約統計を確認した後、画面上部の **[Prepare]** (準備) をクリックします。 [データ ソース ウィザードの詳細](data-source-wizard.md) 

## <a name="building-blocks-of-data-preparation"></a>データ準備の構成要素 ##
### <a name="the-package"></a>パッケージ ###

パッケージは作業のプライマリ コンテナーです。 パッケージはディスクに保存され、ディスクから読み込まれる成果物です。 クライアント内での作業中、パッケージは常にバックグラウンドで自動保存されます。 

パッケージの出力/結果は Python で、または Jupyter Notebook を介して調査できます。

パッケージは、ローカル Python、Spark (Docker 内を含む)、HDInsight などの複数のランタイムにまたがって実行できます。

パッケージには、データに適用されるステップと変換であるデータ フローが 1 つ以上含まれます。

パッケージは別のパッケージをデータ ソースとして使用できます (参照データ フローと呼びます)。

### <a name="the-dataflow"></a>データ フロー ###
データ フローには 1 つのソースとオプションの変換があり、変換は、一連のステップとオプションの変換先を通じてアレンジできます。 あるステップをクリックすると、選択したステップまでのすべてのソースと変換を再実行します。  そのステップを通じて変換されたデータはグリッド内に表示されます。 [Step List] (ステップ リスト) を使用して、データ フロー内でステップを追加、移動、および削除できます。

クライアントの右側にあるステップ リストを開閉することで、画面領域を調整できます。

UI では複数のデータ フローを同時に開くことができ、各データフローは UI 内のタブで表現されます。

### <a name="the-source"></a>ソース
ソースとは、データの元の場所と形式のことです。 Data Prep のパッケージでは、そのデータのソースは常に別のデータ フロー (データ ソース) です。 情報が含まれているのはこの参照データ フローです。 ソースを構成するためのユーザー エクスペリエンスはソースごとに異なります。 ソースはデータの “四角形”/表形式ビューを生成します。 ソース データが元々 “幅合わせしない” である場合、構造は “四角形” に正規化されます。 [付録 2 では、サポートされているソースの現在のリストを示します](data-prep-appendix2-supported-data-sources.md)。

### <a name="the-transform"></a>変換 ###
変換では、特定形式のデータを使用し、(データ型を変更するなど) データに対して何らかの操作を実行し、新しい形式のデータを生成します。 変換ごとに独自の UI と動作があります。 データ フローのステップを介して複数の変換を連結することが、Data Preparation 機能の中核です。 [付録 3 では、サポートされている変換の現在のリストを示します](data-prep-appendix3-supported-transforms.md)。

### <a name="the-inspector"></a>インスペクター ###

インスペクターはデータの視覚化であり、データの理解を向上させるために使用できます。  データおよびデータ品質の問題を理解することは、どのアクション (変換) を実行するべきかの判断に役立ちます。 いくつかのインスペクターは、変換を生成するアクションをサポートします。 たとえば、Value Count (値カウント) インスペクターでは、値を選択した後、その値を包含または除外するフィルターを適用できます。 インスペクターは、変換のコンテキストを提供することもできます。 たとえば、1 つ以上の列を選択すると、適用できる潜在的な変換が変化します。

任意の時点で、1 つの列に複数のインスペクターが存在する場合があります (例: Column Statistics (列の統計) と Histogram (ヒストグラム))。 1 つのインスペクターのインスタンスが複数の列にまたがることも可能です。 たとえば、すべての数値列に Histogram (ヒストグラム) が同時に存在することが可能です。

インスペクターは画面下部の [Profiling Well] (プロファイリング ウェル) に表示されます。  メイン コンテンツ領域内でインスペクターの表示を大きくするには、インスペクターを最大化します。 データ グリッドは既定のインスペクターと考えることができます。 どのインスペクターも、メイン コンテンツ領域に拡張できます。 メイン コンテンツ領域内のインスペクターはプロファイリング ウェルに最小化します。 インスペクター内の鉛筆アイコンをクリックして、インスペクターをカスタマイズします。 ドラッグ アンド ドロップを使用して、ウェル内でインスペクターを並べ替えます。

一部のインスペクターは “ハロー” モードをサポートします。 このモードは、最後の変換が適用される前に値または状態を表示します。 古い値は灰色で、現在の値は前面に表示され、変換の影響を示します。 [付録 4 では、サポートされているインスペクターの現在のリストを示します](data-prep-appendix4-supported-inspectors.md)。

### <a name="the-destination"></a>変換先
 変換先は、データ フローでデータを準備した後にデータが書き込まれる/エクスポートされる先です。 1 つのデータ フローが複数の変換先を持つことができます。 変換先を構成するためのユーザー エクスペリエンスは変換先ごとに異なります。 変換先は “四角形”/表形式のデータを使用し、指定された形式で同じ場所に書き出します。 [付録 5 では、サポートされている変換先の現在のリストを示します](data-prep-appendix5-supported-destinations.md)。

### <a name="using-data-preparation"></a>Data Preparation の使用 ###
Data Preparation では、データ準備のための基本的な 5 ステップの方法論/アプローチが想定されています。

#### <a name="step-1-ingestion"></a>ステップ 1: 取り込み ####
プロジェクト ビュー内で **[Add Data Source] (データ ソースの追加)** オプションを使用して Data Preparation のためにデータをインポートします。  初回のデータ取り込みはすべてデータ ソース ウィザードを通じて処理されます。

#### <a name="step-2-understandprofile-the-data"></a>ステップ 2: データの理解/プロファイリング ####

まず、各列の最上部にある [Data Quality Bar] (データ品質バー) に注目します。 緑色は、値のある行を表します。 灰色は、値のない行、null の行、その他の行を表します。赤色は、エラー値を示します。 バーにマウス カーソルを合わせると、3 つのバケットそれぞれの正確な行数がヒントに表示されます。 データ品質バーでは対数スケールを使用するので、欠落データの分量を大まかに把握するには、常に実際の数値をチェックします。

![columns](media/data-prep-getting-started/columns.png)

次に、データ特性の理解を深めるために、その他のインスペクターとグリッドの組み合わせを使用します。  さらなる分析のために必要なデータ準備について、仮説の立案を開始します。 ほとんどのインスペクターは、1 列または少数の列に対して機能します。  

データを理解するためには、高確率で、複数の列にまたがる複数のインスペクターが必要です。 プロファイリング ウェルでは、スクロール操作でさまざまなインスペクターを参照できます。 ウェル内で、リストの先頭にインスペクターを移動して、即時表示可能な領域でインスペクターを確認することもできます。

![インスペクター](media/data-prep-getting-started/inspectors.PNG)

継続的または分類的な変数/列のための、さまざまなインスペクターが提供されます。 [Inspector] (インスペクター) メニューでは、存在する変数/列の種類に応じてオプションが有効または無効になります。

多くの列がある大規模なデータセットを扱うときは、サブセットを扱うという実用的なアプローチをお勧めします。 このアプローチには、少数の列 (たとえば、5 ～ 10 列) に焦点を当て、それらを準備してから、残りの列の作業をするというものが含まれます。 グリッド インスペクターは列の垂直分割をサポートするため、300 列を超えるような場合、列の "ページ操作" が必要です。
 

#### <a name="step-3-transform-the-data"></a>ステップ 3: データの変換 ####
変換では、現在の作業仮説を支持するために、データを変更し、データの実行を許可します。 変換は右側の [Step List] (ステップ リスト) に [Steps] (ステップ) として表示されます。 ステップ リスト内で任意の箇所をクリックすることにより、ステップ リスト内で “タイム トラベル” ができます。

特定のステップの左側にある緑色のアイコンは、ステップが実行済みであり、データには変換の実行が反映されていることを示します。 ステップの左側の縦棒は、インスペクターにおけるデータの現在の状態を示します。

![steps](media/data-prep-getting-started/steps.PNG)

仮説の進展に伴い、毎回の変更後、データに小規模かつ頻繁な変更を加えて検証することを試みます (ステップ 4)。

#### <a name="step-4-verify-the-impact-of-the-transformation"></a>ステップ 4: 変換の影響を検証します。 
仮説が正しかったかどうかを判断します。 正しかった場合、次の仮説を作成し、新しい仮説に対して手順 2 ～ 3 を繰り返します。 正しくなかった場合、最後の変換を元に戻し、新しい仮説を作成して、手順 2 ～ 3 を繰り返します。

変換の影響が正しかったかどうかは、主にインスペクターを使用して判断します。 既存のものを使用します。 特定時点のデータを表示するには、ハロー効果を有効にしてインスペクターを使用するか、複数のインスペクターを起動します。

![ハロー インスペクター](media/data-prep-getting-started/halo1.PNG) ![ハロー インスペクター](media/data-prep-getting-started/halo2.PNG)

変換を元に戻すには、UI の右側にあるステップ リストに移動します。 (場合によっては、ステップ リスト パネルを再表示させる必要があります。パネルを開くには、左向きの二重シェブロンをクリックします)。 パネル内で、元に戻す実行済みの変換を選択します。 UI ブロックの右側にあるドロップダウンを選択します。 **[Edit] (編集)**  を選択して変更を加えるか、**[Delete] (削除)**  をクリックしてステップ リストとデータ フローから変換を削除します。

#### <a name="step-5-output"></a>ステップ 5: 出力 
データの準備が終了したら、データ フローを出力に書き込むことができます。 データ フローは多くの出力を持つことができます。 [Transforms] (変換)メニューから、どの出力としてデータセットを書き込むか選択できます。 出力の変換先を選択することもできます。 

## <a name="list-of-appendices"></a>付録の一覧 
[付録 2 - サポートされるデータ ソース](data-prep-appendix2-supported-data-sources.md)  
[付録 3 - サポートされる変換](data-prep-appendix3-supported-transforms.md)  
[付録 4 - サポートされるインスペクター](data-prep-appendix4-supported-inspectors.md)  
[付録 5 - サポートされる変換先](data-prep-appendix5-supported-destinations.md)  
[付録 6 - Python のフィルター式のサンプル](data-prep-appendix6-sample-filter-expressions-python.md)  
[付録 7 - Python の変換データ フロー式のサンプル](data-prep-appendix7-sample-transform-data-flow-python.md)  
[付録 8 - Python のデータ ソースのサンプル](data-prep-appendix8-sample-source-connections-python.md)  
[付録 9 - Python の変換先接続のサンプル](data-prep-appendix9-sample-destination-connections-python.md)  
[付録 10 - Python の列変換のサンプル](data-prep-appendix10-sample-custom-column-transforms-python.md)  

## <a name="see-also"></a>関連項目

[Advanced data preparation tutorial (高度なデータ準備のチュートリアル)](tutorial-bikeshare-dataprep.md)